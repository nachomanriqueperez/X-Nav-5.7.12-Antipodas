<html>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
	<head>
 		<title>Las Antipodas</title>
		<style>
			#map {
				width:500px;
				height: 400px;
			}

                        #mapUser {
				width:500px;
				height: 400px;
			}
		</style>
 	</head>
	<body >
        	<p id='geo'></p>
        	<p id='demo'></p>
         	<p id = "headmap">Mapa centrado en las Antipodas</p>
        	<p id='map'></p>
        	<div class="info_block_anti" float = "left">
                    <h4 style="display:inline">Coordenada de las Antipodas</h4><br>
                    <div class="row"><span><span class="label">Latitud:</span><span class="value" id="lat_dec_ant">-47.75409797968</span></span></div>
                    <div class="row"><span><span class="label">Longitud:</span><span class="value" id="lon_dec_ant">75.76171875</span></span></div>
                </div>
        	<p id = "headmapuser">Mapa centrado en posicion actual del usuario (Recuerda dar permisos de tu ubicacion)</p>
        	<p id='mapUser'></p>
        	<div class="info_block_user" float = "left">
                    <h4 style="display:inline">Coordenada de tu posicion actual</h4><br>
                    <div class="row"><span><span class="label">Latitud:</span><span class="value" id="lat_dec_user">-47.75409797968</span></span></div>
                    <div class="row"><span><span class="label">Longitud:</span><span class="value" id="lon_dec_user">75.76171875</span></span></div>
                </div>
	<script type="text/javascript" charset="utf-8">

		function compatible(elem,frase){
                        writeElement = document.getElementById(elem);
                        writeElement.innerHTML = frase;
                }

                if (Modernizr.geolocation) {
                        compatible("geo","Compatible con geolocalizacion.")
                        var latitud;
                        var longitud;

                        function setLat(lat){
                                latitud = lat;
                        }

                        function getLat(){
                                return latitud;
                        }

                        function setLon(lon){
                                longitud = lon;
                        }

                        function getLon(){
                                return longitud;
                        }

			var options = {
				  enableHighAccuracy: true,
				  timeout: 5000,
				  maximumAge: 0
			};

			function success(pos) {
		    	        var crd = pos.coords;
				var lat_user =crd.latitude;
				var lon_user =crd.longitude;
				compatible("lat_dec_user", lat_user);
				compatible("lon_dec_user", lon_user);

                                setLat(lat_user);
                                setLon(lon_user);

                                console.log('Your current position is:');
                                console.log('Latitude : ' + crd.latitude);
                                console.log('Longitude: ' + crd.longitude);
                                console.log('More or less ' + crd.accuracy + ' meters.');

                                var mapDivUser = document.getElementById("mapUser");

				var map = new google.maps.Map(mapDivUser, {
					center: {lat: parseFloat(getLat()), lng: parseFloat(getLon())},
					zoom: 8
				});


			};

			function error(err) {
				console.warn('ERROR(' + err.code + '): ' + err.message);
			};

                        function initMap(){
                                var mapDiv = document.getElementById("map");
				var map = new google.maps.Map(mapDiv, {
					center: {lat: 44.540, lng: -78.546},
					zoom: 8
				});
                                
                                navigator.geolocation.getCurrentPosition(success, error, options);

			}

                } else {
                	compatible("geo","NO compatible con geolocalizacion.")
                };

		</script>
		<script src = "https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>
	</body>
</html>
